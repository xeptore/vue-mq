{"version":3,"file":"vue-mq.min.js","sources":["../src/utils.js","../src/component.js","../src/helpers.js","../src/index.js"],"sourcesContent":["export function isArray (arg) {\n  return Object.prototype.toString.call(arg) === '[object Array]';\n}\n","// USAGE\n// mq-layout(mq=\"lg\")\n//   p Iâ€™m lg\nimport { selectBreakpoints } from './helpers'\nimport { isArray } from './utils';\nconst component = {\n  props: {\n    mq: {\n      required: true,\n      type: [String, Array],\n    }\n  },\n  computed: {\n    plusModifier() { return !isArray(this.mq) && this.mq.slice(-1) === '+' },\n    activeBreakpoints() {\n      const breakpoints = Object.keys(this.$mqAvailableBreakpoints)\n      const mq = this.plusModifier ? this.mq.slice(0, -1) : (isArray(this.mq) ? this.mq : [this.mq])\n      return this.plusModifier\n        ? selectBreakpoints(breakpoints, mq)\n        : mq\n    }\n  },\n  render(h, props) {\n    const shouldRenderChildren = this.activeBreakpoints.includes(this.$mq)\n    return shouldRenderChildren ? h('div', this.$slots.default) : h()\n  },\n}\n\nexport default component\n","import json2mq from 'json2mq'\n\nexport function transformValuesFromBreakpoints(breakpoints, values, currentBreakpoint) {\n  const findClosestValue = (currentBreakpoint) => {\n    if (values[currentBreakpoint] !== undefined) return values[currentBreakpoint]\n    const index = breakpoints.findIndex(b => b === currentBreakpoint)\n    const newBreakpoint = index !== -1 || index !== 0 ? breakpoints[index-1] : null\n    if (!newBreakpoint) return values[index]\n    return values[newBreakpoint] !== undefined ? values[newBreakpoint] : findClosestValue(newBreakpoint)\n  }\n  return findClosestValue(currentBreakpoint)\n}\n\nexport function selectBreakpoints(breakpoints, currentBreakpoint) {\n  const index = breakpoints.findIndex(b => b === currentBreakpoint)\n  return breakpoints.slice(index)\n}\n\nexport function subscribeToMediaQuery(mediaQuery, enter) {\n  const mql = window.matchMedia(mediaQuery)\n  const cb = ({ matches }) => {\n    if (matches) enter()\n  }\n  mql.addListener(cb) //subscribing\n  cb(mql) //initial trigger\n}","import { subscribeToMediaQuery, transformValuesFromBreakpoints } from './helpers.js'\nimport MqLayout from './component.js'\n\nconst DEFAULT_BREAKPOINT = {\n  sm: 450,\n  md: 1250,\n  lg: Infinity,\n}\n\nconst install = function (Vue, { breakpoints = DEFAULT_BREAKPOINT, defaultBreakpoint = 'sm' } = {}) {  \n  let hasSetupListeners = false\n  // Init reactive component\n  const reactorComponent = new Vue({\n    data: () => ({\n      currentBreakpoint: defaultBreakpoint,\n    })\n  })\n  Vue.filter('mq', (currentBreakpoint, values) => {\n    return transformValuesFromBreakpoints(Object.keys(breakpoints), values, currentBreakpoint)\n  })\n  Vue.mixin({\n    computed: {\n      $mq() {\n        return reactorComponent.currentBreakpoint\n      },\n    },\n    created () {\n      if (this.$isServer) reactorComponent.currentBreakpoint = defaultBreakpoint\n    },\n    mounted() {\n      if (!hasSetupListeners) {\n        const mediaQueries = breakpoints\n        // setup listeners\n        for (const key in mediaQueries) {\n          const mediaQuery = mediaQueries[key]\n          const enter = () => { reactorComponent.currentBreakpoint = key }\n          subscribeToMediaQuery(mediaQuery, enter)\n        }\n        hasSetupListeners = true\n      }\n    }\n  })\n  Vue.prototype.$mqAvailableBreakpoints = breakpoints\n  Vue.component('MqLayout', MqLayout)\n}\n\nexport default { install }\n"],"names":["isArray","arg","Object","prototype","toString","call","component","props","mq","required","type","String","Array","computed","plusModifier","this","slice","activeBreakpoints","breakpoints","keys","$mqAvailableBreakpoints","currentBreakpoint","index","findIndex","b","selectBreakpoints","render","h","includes","$mq","$slots","default","DEFAULT_BREAKPOINT","sm","md","lg","Infinity","install","Vue","defaultBreakpoint","hasSetupListeners","reactorComponent","data","filter","values","findClosestValue","undefined","newBreakpoint","transformValuesFromBreakpoints","mixin","created","$isServer","mounted","mediaQueries","key","mediaQuery","enter","mql","window","matchMedia","cb","matches","addListener","subscribeToMediaQuery","MqLayout"],"mappings":"iLAAO,SAASA,EAASC,SACwB,mBAAxCC,OAAOC,UAAUC,SAASC,KAAKJ,GCIxC,IAAMK,EAAY,CAChBC,MAAO,CACLC,GAAI,CACFC,UAAU,EACVC,KAAM,CAACC,OAAQC,SAGnBC,SAAU,CACRC,+BAAyBd,EAAQe,KAAKP,KAA6B,MAAtBO,KAAKP,GAAGQ,OAAO,IAC5DC,iCACQC,EAAchB,OAAOiB,KAAKJ,KAAKK,yBAC/BZ,EAAKO,KAAKD,aAAeC,KAAKP,GAAGQ,MAAM,GAAI,GAAMhB,EAAQe,KAAKP,IAAMO,KAAKP,GAAK,CAACO,KAAKP,WACnFO,KAAKD,aCJX,SAA2BI,EAAaG,OACvCC,EAAQJ,EAAYK,UAAU,SAAAC,UAAKA,IAAMH,WACxCH,EAAYF,MAAMM,GDGjBG,CAAkBP,EAAaV,GAC/BA,IAGRkB,gBAAOC,EAAGpB,UACqBQ,KAAKE,kBAAkBW,SAASb,KAAKc,KACpCF,EAAE,MAAOZ,KAAKe,OAAOC,SAAWJ,MErB5DK,EAAqB,CACzBC,GAAI,IACJC,GAAI,KACJC,GAAIC,EAAAA,SAwCS,CAAEC,QArCD,SAAUC,gEAAsE,OAA/DpB,YAAAA,aAAcc,QAAoBO,kBAAAA,aAAoB,OACjFC,GAAoB,EAElBC,EAAmB,IAAIH,EAAI,CAC/BI,KAAM,iBAAO,CACXrB,kBAAmBkB,MAGvBD,EAAIK,OAAO,KAAM,SAACtB,EAAmBuB,UDfhC,SAAwC1B,EAAa0B,EAAQvB,UACzC,SAAnBwB,EAAoBxB,WACUyB,IAA9BF,EAAOvB,GAAkC,OAAOuB,EAAOvB,OACrDC,EAAQJ,EAAYK,UAAU,SAAAC,UAAKA,IAAMH,IACzC0B,GAA2B,IAAXzB,GAA0B,IAAVA,EAAcJ,EAAYI,EAAM,GAAK,YACtEyB,OAC4BD,IAA1BF,EAAOG,GAA+BH,EAAOG,GAAiBF,EAAiBE,GAD3DH,EAAOtB,GAG7BuB,CAAiBxB,GCQf2B,CAA+B9C,OAAOiB,KAAKD,GAAc0B,EAAQvB,KAE1EiB,EAAIW,MAAM,CACRpC,SAAU,CACRgB,sBACSY,EAAiBpB,oBAG5B6B,mBACMnC,KAAKoC,YAAWV,EAAiBpB,kBAAoBkB,IAE3Da,uBACOZ,EAAmB,KAChBa,EAAenC,aAEVoC,IDfZ,SAA+BC,EAAYC,OAC1CC,EAAMC,OAAOC,WAAWJ,GACxBK,EAAK,cAAGC,SACCL,KAEfC,EAAIK,YAAYF,GAChBA,EAAGH,GCYKM,CAFmBV,EAAaC,GAClB,WAAQb,EAAiBpB,kBAAoBiC,SAFxD,IAAMA,KAAOD,IAAPC,GAKXd,GAAoB,MAI1BF,EAAInC,UAAUiB,wBAA0BF,EACxCoB,EAAIhC,UAAU,WAAY0D"}